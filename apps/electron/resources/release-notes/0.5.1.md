# v0.5.1 — Automations

---

## Automations

Automations (formerly hooks/tasks) now have a full management UI — no more editing JSON files by hand.

- **Sidebar panel** — Browse, search, and filter automations by type (All, Scheduled, Event-driven)
- **Enable / Disable** — Toggle individual automations on or off without deleting them
- **Duplicate & Delete** — Clone an existing automation or remove it, with batch support for multi-select
- **Execution history** — Each automation records success/failure to a timeline, viewable in the detail page
- **In-app editing** — Edit button on the automation detail page for quick changes
- **Test runner** — Manually trigger an automation to verify it works before waiting for the real event

### LLM Connection & Model on Prompt Actions

Prompt actions can now specify which AI provider and model to use for the session they create:

```json
{
  "type": "prompt",
  "prompt": "Review overnight @github pull requests",
  "llmConnection": "my-openrouter",
  "model": "anthropic/claude-sonnet-4.5"
}
```

The `llmConnection` value is the slug of an LLM connection from AI Settings. Validation catches missing connections (error) and model/provider mismatches (warning) before runtime.

### Config Format

The canonical config file is now `automations.json` with version 2 format. Legacy `hooks.json` is no longer loaded — rename and update to continue using your existing automations.

## Improvements

- **API sources for all providers** — API sources (Slack, Gmail) are now exposed to the MCP pool, making them available to non-Anthropic backends like Copilot, Codex, and Gemini
- **Skill metadata** — `requiredSources` and `icon` fields are now displayed in the skill info page ([#290](https://github.com/lukilabs/craft-agents-oss/issues/290))
- **Automations list sorting** — Sorted by most recent execution for quick access to active automations
- **`Setup` agent event** — New event type for agent initialization automations
- **Cron year display** — Shows year in next-run previews when runs span multiple years

## Bug Fixes

- **File mentions** — File and folder mentions in chat messages are no longer stripped; they now resolve to absolute paths for the agent ([#293](https://github.com/lukilabs/craft-agents-oss/issues/293))
- **Config watcher directory** — ConfigWatcherManager no longer creates `sources/` and `skills/` directories inside the session's working directory instead of the workspace root
- **Automation test handler** — Manual "Test" now resolves `@mentions`, enables sources, and passes `llmConnection`/`model`/`permissionMode` (same code path as the scheduler)
- **Install scripts** — Fetch YAML manifests directly instead of relying on the version endpoint; multiple PowerShell 5.1 compatibility fixes ([#273](https://github.com/lukilabs/craft-agents-oss/issues/273))

## Breaking Changes

- **Legacy config removed** — `hooks.json` is no longer read and there is no automatic migration. If you had existing hooks, you'll need to recreate them as automations in the new `automations.json` format. The easiest way is to describe your workflows to the agent — e.g. "set up a daily standup briefing at 9am" — and it will create the configuration for you. See the [Automations docs](https://agents.craft.do/docs/automations/overview) for the full format reference.
